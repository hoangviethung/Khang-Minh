"use strict";const rangeProduct=()=>{const a=+$("#low").text(),b=+$("#high").text();var c=document.getElementById("rangeProduct");if(c){noUiSlider.create(c,{start:[a,b],range:{min:[a],max:[b]},step:1e3,format:wNumb({decimals:3,thousand:".",suffix:" vn\u0111"})});var d=[document.querySelector("span.priceLow__range"),document.querySelector("span.priceHigh__range")];c.noUiSlider.on("update",function(a,b){d[b].innerHTML=a[b]});const e=formatMoney(+$("#low").text()),f=formatMoney(+$("#high").text());$("#low").text(e+" vn\u0111"),$("#high").text(f+" vn\u0111")}};function formatMoney(a,b,e,f){var g=Math.abs,b=isNaN(b=g(b))?0:b,e=null==e?".":e,f=null==f?".":f,h=0>a?"-":"",k=parseInt(a=g(+a||0).toFixed(b))+"",i=3<(i=k.length)?i%3:0;return h+(i?k.substr(0,i)+f:"")+k.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+f)+(b?e+g(a-k).toFixed(b).slice(2):"")}const orderPrice=()=>{const a=document.querySelectorAll(".proItem__price"),b=document.querySelector("#filter");b&&$(".proFilter__item.submit").click(function(b){b.preventDefault();const c=$(".proFilter__item.range label").attr("data-current"),d=$(".proFilter__item.price select").val(),e=$(".priceLow__range").text(),f=$(".priceHigh__range").text(),g=+e.replace(".","").replace(" "+c,""),h=+f.replace(".","").replace(" "+c,"");a.forEach(a=>{const b=$(a).children("h4").eq(1).attr("data-txt"),c=$(a).children("h4").eq(1).text(),e=c.replace(" "+b,""),f=+e.replace(".","");if(1==d){const b=getPriceMinMax(),c=b.sort;for(let b=0;b<c.length;b++)c[b]==f&&$(a).parent().parent().css("order",b+1)}else{const b=getSortDown(),c=b.sort;for(let b=0;b<c.length;b++)c[b]==f&&$(a).parent().parent().css("order",b+1)}f<=h&&f>=g?$(a).parent().parent().removeClass("d-none"):$(a).parent().parent().addClass("d-none")})})},getPriceMinMax=()=>{var a=[];const b=document.querySelectorAll(".proItem__price");b.forEach(b=>{const c=$(b).children("h4").eq(1).attr("data-txt"),d=$(b).children("h4").eq(1).text(),e=d.replace(" "+c,""),f=+e.replace(".","");a.push(f)});const c=Math.max(...a),d=Math.min(...a),e=a.sort(function(c,a){return c-a});return{min:d,max:c,sort:e}},getSortDown=()=>{var a=[];const b=document.querySelectorAll(".proItem__price");b.forEach(b=>{const c=$(b).children("h4").eq(1).attr("data-txt"),d=$(b).children("h4").eq(1).text(),e=d.replace(" "+c,""),f=+e.replace(".","");a.push(f)});const c=a.sort(function(c,a){return a-c});return{sort:c}},showSale=()=>{const a=document.querySelectorAll(".proItem__price");a.forEach(a=>{const b=+$(a).children("h4").eq(1).text(),c=+$(a).children("h4").eq(1).attr("data-sale"),d=$(a).children("h4").eq(1).attr("data-txt"),e=formatMoney(b),f=formatMoney(c);0<c?($(a).children("h4").eq(1).text(f+" "+d),$(a).children("h4").eq(0).text(e+" "+d)):($(a).children("h4").eq(1).text(e+" "+d),$(a).children("h4").eq(0).addClass("d-none"),$(a).children("span").eq(0).addClass("d-none"),$(a).addClass("noSale"))})},showSaleDetail=()=>{const a=$("h3.new span").text(),b=$("h3.new").attr("data-sale"),c=$("h3.new").attr("data-txt"),d=a.replace(" "+c,""),e=+d.replace(".",""),f=formatMoney(e),g=formatMoney(b);$("h3.new span").text(f+" "+c),""===b?($("h3.old").addClass("d-n"),$("h3.new").addClass("no-sale"),$("h3.new-x").addClass("d-n")):($("h3.old").removeClass("d-n"),$("h3.new").addClass("d-n"),$("h3.new").removeClass("no-sale"),$("h3.new-x span").text(g+" "+c),$("h3.old span").text(f+" "+c))},ajaxGetMoreProduct=()=>{const a=document.querySelector(".productGetAll");a&&$(a).click(function(a){a.preventDefault();const b=$(this).attr("data-url");$.ajax({type:"get",url:b,success:a=>{const b=$(".product__list");b.html(a)},error:a=>{console.log(a)}})})};document.addEventListener("DOMContentLoaded",()=>{rangeProduct(),orderPrice(),showSale(),showSaleDetail(),ajaxGetMoreProduct()});
"use strict";document.addEventListener("DOMContentLoaded",()=>{var a,b=b||{};b={model:{avatar:""},init:function(){const c=document.querySelector(".btn-google").getAttribute("data-api"),d=document.querySelector(".btn-facebook").getAttribute("data-api");Array.from(document.querySelectorAll(".btn-google")).forEach(function(d){gapi.load("auth2",function(){a=gapi.auth2.init({client_id:`${c}`,cookiepolicy:"single_host_origin"}),b.events.attachGGSignin(d)})}),window.fbAsyncInit=function(){FB.init({appId:`${d}`,cookie:!0,xfbml:!0,version:"v4.0"})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="https://connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk"),$(".btn-facebook").click(b.events.attachFBSignin)},events:{attachFBSignin:function(){FB.login(function(a){"connected"===a.status&&b.events.facebook({id:a.authResponse.userID,token:a.authResponse.accessToken,name:"",email:"octopuzecontact@gmail.com",image:"",provider:"FACEBOOK"})},{scope:"email",return_scopes:!0})},attachGGSignin(c){a.attachClickHandler(c,{},function(a){console.log(1);var c=a.getBasicProfile();b.events.google({id:c.getId(),name:c.getName(),email:c.getEmail(),token:a.getAuthResponse().id_token,image:c.getImageUrl(),provider:""})},function(a){console.log(JSON.stringify(a,void 0,2))})},google:function(a){if(a.provider="GOOGLE",null!=a){var b=gapi.auth2.getAuthInstance();b.signOut().then(function(){$.ajax({url:"/external-login",type:"POST",data:JSON.stringify(a),contentType:"application/json",success:function(a){alert(a.Message),200==a.Code&&window.location.reload()}})})}},facebook:function(a){FB.api("/"+a.id+"/picture","GET",{redirect:"false"},function(b){b&&!b.error&&(a.image=b.data.url,FB.api("/me",function(b){b&&!b.error&&(a.name=b.name,$.ajax({url:"/external-login",type:"POST",data:JSON.stringify(a),contentType:"application/json",success:function(a){alert(a.Message),200==a.Code&&window.location.reload()}}))}))})}}},b.init()});